"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _persistenceHelpers=require("./persistenceHelpers");var CACHED_SESSION_STATE=null;function enhancer(){var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref$persist=_ref.persist,persist=_ref$persist===void 0?true:_ref$persist;return function enhance(createStore){return function newCreateStore(){var store=createStore.apply(void 0,arguments);if(!persist)return store;store.subscribe(function(){var sessionState=store.getState().sessions;if(!sessionState)throw new Error("redux-sessions: error when attempting to save state. Did you remember to attach the reducer at key `sessions`?");if(sessionState===CACHED_SESSION_STATE)return;CACHED_SESSION_STATE=sessionState;return(0,_persistenceHelpers.saveSessionState)(sessionState)});return store}}}var _default=enhancer;exports["default"]=_default;